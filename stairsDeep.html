<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Υπολογισμός Γωνιακής Σκάλας | Εργαλείο Τεχνίτη</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Apply the Inter font family */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom transition for smoother UI updates */
        .transition-all {
            transition: all 0.3s ease-in-out;
        }
        /* Dark mode colors */
        .dark-bg {
            background-color: #1a202c;
        }
        .dark-card {
            background-color: #2d3748;
        }
        .dark-text {
            color: #e2e8f0;
        }
        .dark-border {
            border-color: #4a5568;
        }
        .dark-input {
            background-color: #4a5568;
            border-color: #718096;
            color: #f7fafc;
        }
        .dark-input:focus {
            border-color: #63b3ed;
            box-shadow: 0 0 0 3px rgba(99, 179, 237, 0.5);
        }
        .dark-button {
            background-color: #4299e1;
            color: white;
        }
        .dark-button:hover {
            background-color: #3182ce;
        }
        .dark-table {
            background-color: #2d3748;
            color: #e2e8f0;
        }
        .dark-table-header {
            background-color: #4a5568;
            color: #f7fafc;
        }
        .dark-table-row {
            border-color: #4a5568;
        }
    </style>
</head>
<body class="dark-bg dark-text">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <!-- Back Button -->
        <a href="index.html" class="absolute top-4 left-4 inline-flex items-center px-4 py-2 dark-card border dark-border rounded-md shadow-sm text-sm font-medium dark-text hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
            Επιστροφή
        </a>

        <div class="max-w-4xl mx-auto dark-card rounded-xl shadow-lg overflow-hidden mt-16 border dark-border">
            <div class="p-6 sm:p-8">

                <!-- Header Section -->
                <header class="text-center mb-8">
                    <h1 class="text-3xl sm:text-4xl font-bold text-blue-400">Υπολογιστής Γωνιακής Σκάλας</h1>
                    <p class="mt-4 text-md text-gray-300 max-w-2xl mx-auto">
                        <strong>Βοήθεια για τεχνίτες:</strong> Αυτό το εργαλείο σας βοηθά να υπολογίσετε τη γωνία και τα μήκη των δοκών για μια γωνιακή σκάλα. Συμπληρώστε τις διαστάσεις που έχετε μετρήσει και θα σας δώσουμε όλα τα απαραίτητα στοιχεία για την κατασκευή.
                    </p>
                </header>

                <!-- Main Content: Image and Form -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                    
                    <!-- Explanatory Image -->
                    <div class="w-full">
                        <img src="https://placehold.co/600x450/2d3748/4299e1?text=Σχέδιο+Γωνιακής+Σκάλας" 
                             alt="Επεξηγηματικό σχήμα για γωνιακή σκάλα" 
                             class="rounded-lg shadow-md object-cover w-full h-full border dark-border">
                    </div>

                    <!-- Input Form -->
                    <div class="dark-card p-6 rounded-lg border dark-border">
                        <form id="stair-calculator-form">
                            <div class="space-y-6">
                                <!-- Input for 'a' -->
                                <div>
                                    <label for="a" class="block text-sm font-medium text-gray-300">Απόσταση από τοίχο μέχρι γωνία (a)</label>
                                    <input type="number" id="a" name="a" value="10" step="any" required 
                                           class="mt-1 block w-full px-3 py-2 dark-input rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                    <p class="mt-1 text-xs text-gray-400">Η απόσταση από τον τοίχο μέχρι τη γωνία της σκάλας (σε cm)</p>
                                </div>
                                
                                <!-- Input for 'd' -->
                                <div>
                                    <label for="d" class="block text-sm font-medium text-gray-300">Διαγώνιο μήκος (d)</label>
                                    <input type="number" id="d" name="d" value="14" step="any" required 
                                           class="mt-1 block w-full px-3 py-2 dark-input rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                    <p class="mt-1 text-xs text-gray-400">Το μήκος της διαγωνίου από γωνία σε γωνία (σε cm)</p>
                                </div>
                                
                                <!-- Input for 'n' -->
                                <div>
                                    <label for="n" class="block text-sm font-medium text-gray-300">Αριθμός σκαλοπατιών (n)</label>
                                    <input type="number" id="n" name="n" value="11" step="1" required 
                                           class="mt-1 block w-full px-3 py-2 dark-input rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                    <p class="mt-1 text-xs text-gray-400">Πόσα σκαλοπάτια θέλετε να έχει η σκάλα σας</p>
                                </div>
                            </div>
                            
                            <!-- Submit Button -->
                            <button type="submit" class="mt-8 w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white dark-button hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                                </svg>
                                Υπολόγισε Τώρα
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Error Message Area -->
                <div id="error-message" class="mt-6 text-center text-red-400 font-medium transition-all"></div>

                <!-- Results Section -->
                <div id="results-section" class="mt-8 space-y-8 opacity-0 transition-all duration-500">
                    <!-- Angle Result -->
                    <div id="angle-output" class="text-center bg-blue-900 bg-opacity-30 p-6 rounded-lg border border-blue-700">
                        <h3 class="text-lg font-semibold text-gray-200 mb-2">Γωνία Σκάλας</h3>
                        <p id="angle-value" class="text-4xl font-bold text-blue-400"></p>
                        <p class="mt-2 text-sm text-gray-300">Αυτή είναι η γωνία που σχηματίζει η σκάλα σας</p>
                    </div>

                    <!-- Table Result -->
                    <div id="table-output">
                        <h3 class="text-xl font-semibold text-gray-200 mb-4 text-center">Μήκη Δοκών για Κάθε Σκαλοπάτι</h3>
                        <p class="text-center text-gray-400 mb-4 text-sm">Χρησιμοποιήστε αυτά τα μήκη για να κόψετε τις δοκούς σας με ακρίβεια</p>
                        <div id="table-container" class="overflow-x-auto rounded-lg border dark-border shadow-sm dark-table">
                            <!-- Table will be generated here by JavaScript -->
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Signature -->
        <footer class="text-center mt-8 pb-4">
            <p class="text-sm text-gray-500">Εργαλείο για τεχνίτες | Δημιουργήθηκε με ❤️</p>
        </footer>

    </div>

    <script>
        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Get references to DOM elements
            const form = document.getElementById('stair-calculator-form');
            const aInput = document.getElementById('a');
            const dInput = document.getElementById('d');
            const nInput = document.getElementById('n');
            const errorMessage = document.getElementById('error-message');
            const resultsSection = document.getElementById('results-section');
            const angleValue = document.getElementById('angle-value');
            const tableContainer = document.getElementById('table-container');

            /**
             * Function to perform calculations and update the UI.
             */
            const calculateAndDisplay = () => {
                // Clear previous results and errors
                errorMessage.textContent = '';
                resultsSection.classList.add('opacity-0');
                angleValue.textContent = '';
                tableContainer.innerHTML = '';

                // Get values from input fields and convert them to numbers
                const a = parseFloat(aInput.value);
                const d = parseFloat(dInput.value);
                const n = parseInt(nInput.value, 10);

                // --- Input Validation ---
                if (isNaN(a) || isNaN(d) || isNaN(n)) {
                    errorMessage.textContent = 'Παρακαλώ συμπληρώστε όλα τα πεδία με αριθμητικές τιμές.';
                    return;
                }
                if (a <= 0 || d <= 0 || n <= 0) {
                    errorMessage.textContent = 'Οι τιμές πρέπει να είναι θετικοί αριθμοί.';
                    return;
                }
                if (n < 2) {
                     errorMessage.textContent = 'Χρειάζονται τουλάχιστον 2 σκαλοπάτια για να φτιάξετε σκάλα.';
                     return;
                }

                // Check the geometric constraint for arccos
                const acosArgument = (2 * a * a - d * d) / (2 * a * a);
                if (acosArgument < -1 || acosArgument > 1) {
                    errorMessage.textContent = 'Μη έγκυρες διαστάσεις: Το διαγώνιο μήκος (d) δεν μπορεί να είναι μεγαλύτερο από το διπλάσιο της απόστασης (a).';
                    return;
                }

                // --- Calculations (based on Mathematica script) ---

                // 1. Calculate angle0 in degrees
                // Math.acos returns radians, so we convert to degrees
                const angle0 = Math.acos(acosArgument) * (180 / Math.PI);

                // 2. Calculate the angle per step
                const angle = (180 - angle0) / n;

                // 3. Calculate the number of steps to iterate (half, rounded down)
                const n0 = Math.floor(n / 2);

                // 4. Generate the lengths for the table
                const lengths = [];
                for (let j = 1; j <= n0; j++) {
                    // Math.tan expects radians, so we convert the angle
                    const angleJInRadians = (j * angle) * (Math.PI / 180);
                    const length = a * Math.tan(angleJInRadians);
                    lengths.push({
                        index: j,
                        length: length
                    });
                }

                // --- Display Results ---

                // Display the calculated angle
                angleValue.textContent = `${angle0.toFixed(2)}°`;

                // Build the results table HTML
                let tableHTML = `
                    <table class="min-w-full dark-table">
                        <thead class="dark-table-header">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Σκαλοπάτι #</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Μήκος Δοκού (cm)</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y dark-table-row">
                `;

                if (lengths.length > 0) {
                    lengths.forEach(item => {
                        tableHTML += `
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-200">${item.index}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">${item.length.toFixed(2)} cm</td>
                            </tr>
                        `;
                    });
                } else {
                    tableHTML += `<tr><td colspan="2" class="px-6 py-4 text-center text-gray-400">Δεν υπάρχουν αποτελέσματα για εμφάνιση.</td></tr>`;
                }

                tableHTML += `
                        </tbody>
                    </table>
                `;
                
                // Set the table HTML and make the results section visible
                tableContainer.innerHTML = tableHTML;
                resultsSection.classList.remove('opacity-0');
            };

            // Add submit event listener to the form
            form.addEventListener('submit', (event) => {
                event.preventDefault(); // Prevent page reload on form submission
                calculateAndDisplay();
            });
            
            // Perform an initial calculation on page load with default values
            calculateAndDisplay();
        });
    </script>

</body>
</html>