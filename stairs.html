<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Εργαλείο Υπολογισμού Γωνιακής Σκάλας</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Apply the Inter font family */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom transition for smoother UI updates */
        .transition-all {
            transition: all 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <!-- Back Button -->
        <a href="index.html" class="absolute top-4 left-4 inline-flex items-center px-4 py-2 bg-gray-800 border border-gray-700 rounded-md shadow-sm text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
            Πίσω
        </a>

        <div class="max-w-4xl mx-auto bg-gray-800 border border-gray-700 rounded-xl shadow-lg overflow-hidden mt-16">
            <div class="p-6 sm:p-8">

                <!-- Header Section -->
                <header class="text-center mb-8">
                    <h1 class="text-3xl sm:text-4xl font-bold text-blue-400">Εργαλείο για Γωνιακή Σκάλα</h1>
                    <p class="mt-4 text-md text-gray-400 max-w-2xl mx-auto">
                        Βάλε τα μέτρα (a, d) και πόσα σκαλιά θέλεις (n). Το εργαλείο θα σου βγάλει τη γωνία της σκάλας και τα μήκη που πρέπει να κόψεις για κάθε σκαλοπάτι.
                    </p>
                </header>

                <!-- Main Content: Image and Form -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                    
                    <!-- Explanatory Image -->
                    <div class="w-full">
                        <img src="https://placehold.co/600x450/374151/93c5fd?text=Σχέδιο+Μετρήσεων" 
                             alt="Επεξηγηματικό σχήμα που δείχνει τις διαστάσεις a και d σε μια γωνία." 
                             class="rounded-lg shadow-md object-cover w-full h-full border border-gray-700">
                    </div>

                    <!-- Input Form -->
                    <div class="bg-gray-900 p-6 rounded-lg border border-gray-700">
                        <form id="stair-calculator-form">
                            <div class="space-y-6">
                                <!-- Input for 'a' -->
                                <div>
                                    <label for="a" class="block text-sm font-medium text-gray-400">Απόσταση τοίχου (a)</label>
                                    <input type="number" id="a" name="a" value="10" step="any" required class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm text-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                </div>
                                
                                <!-- Input for 'd' -->
                                <div>
                                    <label for="d" class="block text-sm font-medium text-gray-400">Διαγώνιος (d)</label>
                                    <input type="number" id="d" name="d" value="14" step="any" required class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm text-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                </div>
                                
                                <!-- Input for 'n' -->
                                <div>
                                    <label for="n" class="block text-sm font-medium text-gray-400">Πλήθος σκαλιών (n)</label>
                                    <input type="number" id="n" name="n" value="11" step="1" required class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm text-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                </div>
                            </div>
                            
                            <!-- Submit Button -->
                            <button type="submit" class="mt-8 w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all">
                                Υπολόγισέ το!
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Error Message Area -->
                <div id="error-message" class="mt-6 text-center text-red-400 font-medium transition-all"></div>

                <!-- Results Section -->
                <div id="results-section" class="mt-10 space-y-8 opacity-0 transition-all duration-500">
                    <!-- Angle Result -->
                    <div id="angle-output" class="text-center bg-gray-900 p-6 rounded-lg border border-gray-700">
                        <h3 class="text-lg font-semibold text-gray-300 mb-2">Γωνία σκάλας:</h3>
                        <p id="angle-value" class="text-4xl font-bold text-blue-400"></p>
                    </div>

                    <!-- Table Result -->
                    <div id="table-output">
                        <h3 class="text-xl font-semibold text-gray-200 mb-4 text-center">Μήκη για τα Σκαλοπάτια:</h3>
                        <div id="table-container" class="overflow-x-auto rounded-lg border border-gray-700 shadow-sm">
                            <!-- Table will be generated here by JavaScript -->
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Signature -->
        <footer class="text-center mt-8 pb-4">
            <p class="text-sm text-gray-500">Created with Gemini</p>
        </footer>

    </div>

    <script>
        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Get references to DOM elements
            const form = document.getElementById('stair-calculator-form');
            const aInput = document.getElementById('a');
            const dInput = document.getElementById('d');
            const nInput = document.getElementById('n');
            const errorMessage = document.getElementById('error-message');
            const resultsSection = document.getElementById('results-section');
            const angleValue = document.getElementById('angle-value');
            const tableContainer = document.getElementById('table-container');

            /**
             * Function to perform calculations and update the UI.
             */
            const calculateAndDisplay = () => {
                // Clear previous results and errors
                errorMessage.textContent = '';
                resultsSection.classList.add('opacity-0');
                angleValue.textContent = '';
                tableContainer.innerHTML = '';

                // Get values from input fields and convert them to numbers
                const a = parseFloat(aInput.value);
                const d = parseFloat(dInput.value);
                const n = parseInt(nInput.value, 10);

                // --- Input Validation ---
                if (isNaN(a) || isNaN(d) || isNaN(n)) {
                    errorMessage.textContent = 'Βάλε αριθμούς σε όλα τα κουτιά.';
                    return;
                }
                if (a <= 0 || d <= 0 || n <= 0) {
                    errorMessage.textContent = 'Οι τιμές πρέπει να είναι πάνω από το μηδέν.';
                    return;
                }
                if (n < 2) {
                     errorMessage.textContent = 'Τα σκαλιά (n) πρέπει να είναι τουλάχιστον 2.';
                     return;
                }

                // Check the geometric constraint for arccos
                const acosArgument = (2 * a * a - d * d) / (2 * a * a);
                if (acosArgument < -1 || acosArgument > 1) {
                    errorMessage.textContent = 'Λάθος μέτρα. Η διαγώνιος (d) δεν μπορεί να είναι πάνω από το διπλάσιο της απόστασης (a).';
                    return;
                }

                // --- Calculations (based on Mathematica script) ---

                // 1. Calculate angle0 in degrees
                const angle0 = Math.acos(acosArgument) * (180 / Math.PI);

                // 2. Calculate the angle per step
                const angle = (180 - angle0) / n;

                // 3. Calculate the number of steps to iterate (half, rounded down)
                const n0 = Math.floor(n / 2);

                // 4. Generate the lengths for the table
                const lengths = [];
                for (let j = 1; j <= n0; j++) {
                    const angleJInRadians = (j * angle) * (Math.PI / 180);
                    const length = a * Math.tan(angleJInRadians);
                    lengths.push({
                        index: j,
                        length: length
                    });
                }

                // --- Display Results ---

                // Display the calculated angle
                angleValue.textContent = `${angle0.toFixed(4)}°`;

                // Build the results table HTML
                let tableHTML = `
                    <table class="min-w-full bg-gray-800">
                        <thead class="bg-gray-700">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Σκαλί (A/A)</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Μήκος Κοπής</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-700">
                `;

                if (lengths.length > 0) {
                    lengths.forEach(item => {
                        tableHTML += `
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-100">${item.index}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">${item.length.toFixed(4)}</td>
                            </tr>
                        `;
                    });
                } else {
                    tableHTML += `<tr><td colspan="2" class="px-6 py-4 text-center text-gray-500">Δεν υπάρχουν μήκη για εμφάνιση.</td></tr>`;
                }

                tableHTML += `
                        </tbody>
                    </table>
                `;
                
                // Set the table HTML and make the results section visible
                tableContainer.innerHTML = tableHTML;
                resultsSection.classList.remove('opacity-0');
            };

            // Add submit event listener to the form
            form.addEventListener('submit', (event) => {
                event.preventDefault(); // Prevent page reload on form submission
                calculateAndDisplay();
            });
            
            // Perform an initial calculation on page load with default values
            calculateAndDisplay();
        });
    </script>

</body>
</html>
