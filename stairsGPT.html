<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Υπολογιστής Γωνιακής Σκάλας</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .transition-all {
      transition: all 0.3s ease-in-out;
    }
  </style>
</head>
<body class="bg-gray-900 text-gray-100">

  <div class="container mx-auto p-4 sm:p-6 lg:p-8">
    
    <!-- Back Button -->
    <a href="index.html" class="absolute top-4 left-4 inline-flex items-center px-4 py-2 bg-gray-800 border border-gray-600 rounded-md shadow text-sm font-medium text-gray-100 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-amber-500 transition-all">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      Επιστροφή
    </a>

    <div class="max-w-4xl mx-auto bg-gray-800 rounded-xl shadow-inner border border-gray-700 overflow-hidden mt-16">
      <div class="p-6 sm:p-8">

        <!-- Header -->
        <header class="text-center mb-8">
          <h1 class="text-3xl sm:text-4xl font-bold text-amber-400">Υπολογιστής Γωνιακής Σκάλας</h1>
          <p class="mt-4 text-md text-gray-300 max-w-2xl mx-auto">
            Εισάγετε τις τιμές για να υπολογίσετε τη γωνία και τα απαραίτητα μήκη μιας γωνιακής σκάλας.
          </p>
        </header>

        <!-- Main Content -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
          
          <!-- Image -->
          <div class="w-full">
            <img src="https://placehold.co/600x450/2e2e2e/facc15?text=Επεξηγηματικό+Σχήμα"
                 alt="Επεξηγηματικό σχήμα"
                 class="rounded-lg border border-gray-700 shadow-md object-cover w-full h-full">
          </div>

          <!-- Form -->
          <div class="bg-gray-700 p-6 rounded-lg border border-gray-600 shadow-inner">
            <form id="stair-calculator-form">
              <div class="space-y-6">

                <div>
                  <label for="a" class="block text-sm font-medium text-gray-200">Απόσταση μέχρι γωνία (a)</label>
                  <input type="number" id="a" name="a" value="10" step="any" required class="mt-1 block w-full px-3 py-2 bg-gray-900 text-gray-100 border border-gray-600 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm">
                </div>

                <div>
                  <label for="d" class="block text-sm font-medium text-gray-200">Μήκος διαγωνίου (d)</label>
                  <input type="number" id="d" name="d" value="14" step="any" required class="mt-1 block w-full px-3 py-2 bg-gray-900 text-gray-100 border border-gray-600 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm">
                </div>

                <div>
                  <label for="n" class="block text-sm font-medium text-gray-200">Αριθμός σκαλοπατιών (n)</label>
                  <input type="number" id="n" name="n" value="11" step="1" required class="mt-1 block w-full px-3 py-2 bg-gray-900 text-gray-100 border border-gray-600 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm">
                </div>
              </div>

              <button type="submit" class="mt-8 w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-gray-900 bg-amber-400 hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-all">
                Υπολογισμός
              </button>
            </form>
          </div>
        </div>

        <!-- Errors -->
        <div id="error-message" class="mt-6 text-center text-red-400 font-medium transition-all"></div>

        <!-- Results -->
        <div id="results-section" class="mt-8 space-y-8 opacity-0 transition-all duration-500">

          <div id="angle-output" class="text-center bg-gray-700 p-6 rounded-lg border border-gray-600">
            <h3 class="text-lg font-semibold text-amber-300 mb-2">Γωνία σκάλας</h3>
            <p id="angle-value" class="text-4xl font-bold text-amber-400"></p>
          </div>

          <div id="table-output">
            <h3 class="text-xl font-semibold text-amber-300 mb-4 text-center">Μήκη σκαλοπατιών</h3>
            <div id="table-container" class="overflow-x-auto rounded-lg border border-gray-700 shadow-inner bg-gray-800">
              <!-- Filled dynamically -->
            </div>
          </div>
        </div>

      </div>
    </div>

    <footer class="text-center mt-8 pb-4">
      <p class="text-sm text-gray-500">Σχεδιασμένο για χρήση από τεχνίτες. Υπογραφή: Κώστας Κούδας</p>
    </footer>

  </div>

    <script>
        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Get references to DOM elements
            const form = document.getElementById('stair-calculator-form');
            const aInput = document.getElementById('a');
            const dInput = document.getElementById('d');
            const nInput = document.getElementById('n');
            const errorMessage = document.getElementById('error-message');
            const resultsSection = document.getElementById('results-section');
            const angleValue = document.getElementById('angle-value');
            const tableContainer = document.getElementById('table-container');

            /**
             * Function to perform calculations and update the UI.
             */
            const calculateAndDisplay = () => {
                // Clear previous results and errors
                errorMessage.textContent = '';
                resultsSection.classList.add('opacity-0');
                angleValue.textContent = '';
                tableContainer.innerHTML = '';

                // Get values from input fields and convert them to numbers
                const a = parseFloat(aInput.value);
                const d = parseFloat(dInput.value);
                const n = parseInt(nInput.value, 10);

                // --- Input Validation ---
                if (isNaN(a) || isNaN(d) || isNaN(n)) {
                    errorMessage.textContent = 'Παρακαλώ συμπληρώστε όλα τα πεδία με αριθμητικές τιμές.';
                    return;
                }
                if (a <= 0 || d <= 0 || n <= 0) {
                    errorMessage.textContent = 'Οι τιμές πρέπει να είναι θετικοί αριθμοί.';
                    return;
                }
                if (n < 2) {
                     errorMessage.textContent = 'Ο αριθμός σκαλοπατιών (n) πρέπει να είναι τουλάχιστον 2.';
                     return;
                }

                // Check the geometric constraint for arccos
                const acosArgument = (2 * a * a - d * d) / (2 * a * a);
                if (acosArgument < -1 || acosArgument > 1) {
                    errorMessage.textContent = 'Μη έγκυρος συνδυασμός τιμών. Πρέπει να ισχύει: d <= 2a.';
                    return;
                }

                // --- Calculations (based on Mathematica script) ---

                // 1. Calculate angle0 in degrees
                // Math.acos returns radians, so we convert to degrees
                const angle0 = Math.acos(acosArgument) * (180 / Math.PI);

                // 2. Calculate the angle per step
                const angle = (180 - angle0) / n;

                // 3. Calculate the number of steps to iterate (half, rounded down)
                const n0 = Math.floor(n / 2);

                // 4. Generate the lengths for the table
                const lengths = [];
                for (let j = 1; j <= n0; j++) {
                    // Math.tan expects radians, so we convert the angle
                    const angleJInRadians = (j * angle) * (Math.PI / 180);
                    const length = a * Math.tan(angleJInRadians);
                    lengths.push({
                        index: j,
                        length: length
                    });
                }

                // --- Display Results ---

                // Display the calculated angle
                angleValue.textContent = `${angle0.toFixed(4)}°`;

                // Build the results table HTML
                let tableHTML = `
                    <table class="min-w-full bg-white">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Α/Α</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Μήκος</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                `;

                if (lengths.length > 0) {
                    lengths.forEach(item => {
                        tableHTML += `
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${item.index}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.length.toFixed(4)}</td>
                            </tr>
                        `;
                    });
                } else {
                    // This case is handled by n<2 validation, but good to have as a fallback.
                    tableHTML += `<tr><td colspan="2" class="px-6 py-4 text-center text-gray-500">Δεν υπάρχουν μήκη για εμφάνιση.</td></tr>`;
                }

                tableHTML += `
                        </tbody>
                    </table>
                `;
                
                // Set the table HTML and make the results section visible
                tableContainer.innerHTML = tableHTML;
                resultsSection.classList.remove('opacity-0');
            };

            // Add submit event listener to the form
            form.addEventListener('submit', (event) => {
                event.preventDefault(); // Prevent page reload on form submission
                calculateAndDisplay();
            });
            
            // Perform an initial calculation on page load with default values
            calculateAndDisplay();
        });
    </script>

</body>
</html>
